<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTEC Concierge Delivery</title>
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* =========================================
           CSS VARIABLES & STYLES (Pure CSS)
           ========================================= */
        :root {
            --primary: #4F46E5; 
            --primary-hover: #4338ca;
            --secondary: #1E1B4B; 
            --accent: #F59E0B; 
            --bg-gradient: linear-gradient(135deg, #eef2ff 0%, #ffffff 50%, #e2e8f0 100%);
            --glass-bg: rgba(255, 255, 255, 0.95);
            --glass-border: 1px solid rgba(255, 255, 255, 0.5);
            --shadow-lg: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --danger: #EF4444;
            --success: #10B981;
            --font-main: 'Outfit', sans-serif;
            --radius: 16px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-main);
            background: var(--bg-gradient);
            color: var(--text-dark);
            min-height: 100vh;
            line-height: 1.5;
            overflow-x: hidden;
        }
        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .hidden { display: none !important; }
        .text-center { text-align: center; }

        /* Animations */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
        .animate-fade-in { animation: fadeInUp 0.8s ease-out forwards; }
        .animate-shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }

        /* Navbar */
        .navbar {
            position: fixed; top: 0; left: 0; width: 100%; height: 70px;
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px);
            border-bottom: 1px solid #e5e7eb; z-index: 1000; display: flex; align-items: center;
        }
        .nav-content { display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .logo { display: flex; align-items: center; gap: 10px; font-size: 1.25rem; font-weight: 700; color: var(--secondary); }
        .logo-icon { width: 32px; height: 32px; background: var(--secondary); color: white; border-radius: 8px; display: flex; align-items: center; justify-content: center; }
        .nav-links { display: flex; gap: 30px; align-items: center; }
        .nav-link { font-weight: 500; color: var(--text-light); transition: color 0.3s; }
        .nav-link:hover { color: var(--primary); }
        .btn-nav { background: var(--primary); color: white; padding: 8px 20px; border-radius: 50px; font-weight: 500; transition: transform 0.2s, background 0.3s; }
        .btn-nav:hover { background: var(--primary-hover); transform: translateY(-2px); }
        .mobile-toggle { display: none; font-size: 1.5rem; background: none; border: none; cursor: pointer; }
        .mobile-menu { display: none; background: white; padding: 20px; border-bottom: 1px solid #eee; }
        .mobile-menu a { display: block; padding: 10px 0; border-bottom: 1px solid #f3f4f6; }

        /* Hero */
        .hero { padding-top: 120px; padding-bottom: 40px; text-align: center; }
        .badge { display: inline-flex; align-items: center; gap: 8px; padding: 6px 16px; background: #dbeafe; color: #1e40af; border-radius: 50px; font-size: 0.85rem; font-weight: 600; margin-bottom: 20px; border: 1px solid #bfdbfe; }
        .hero h1 { font-size: 3rem; font-weight: 800; line-height: 1.2; color: var(--secondary); margin-bottom: 20px; }
        .gradient-text { background: linear-gradient(to right, var(--primary), #9333ea); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero p { font-size: 1.2rem; color: var(--text-light); max-width: 700px; margin: 0 auto 30px; }
        .price-pill { display: inline-block; background: white; border: 1px solid #e5e7eb; color: var(--text-light); padding: 6px 16px; border-radius: 8px; font-size: 0.8rem; box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-bottom: 20px; }

        /* Services */
        .section-title { text-align: center; font-size: 1.8rem; color: var(--secondary); margin-bottom: 40px; font-weight: 700; }
        .services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 60px; }
        .service-card { background: white; border: 1px solid #e5e7eb; border-radius: var(--radius); padding: 25px; text-align: center; transition: transform 0.3s, box-shadow 0.3s; position: relative; overflow: hidden; display: flex; flex-direction: column; }
        .service-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-lg); }
        .service-badge { position: absolute; top: 0; right: 0; padding: 4px 12px; font-size: 0.75rem; font-weight: 700; border-bottom-left-radius: 10px; }
        .badge-green { background: #dcfce7; color: #166534; }
        .badge-orange { background: #ffedd5; color: #9a3412; }
        .badge-blue { background: #dbeafe; color: #1e40af; }
        .service-icon { font-size: 2rem; color: var(--primary); margin-bottom: 15px; margin-top: 10px; }
        .service-title { font-weight: 700; color: var(--text-dark); margin-bottom: 5px; }
        .service-desc { font-size: 0.9rem; color: var(--text-light); margin-bottom: 20px; flex-grow: 1; }
        .btn-outline { width: 100%; padding: 10px; background: #f3f4f6; color: var(--primary); border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: background 0.2s; }
        .btn-outline:hover { background: var(--primary); color: white; }

        /* Steps (How it Works) */
        .steps-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; margin-bottom: 60px; }
        .step-card { text-align: center; background: white; padding: 20px; border-radius: var(--radius); border: 1px solid #f3f4f6; }
        .step-num { width: 40px; height: 40px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; font-weight: 700; }

        /* Form */
        .form-section { padding: 60px 0 100px; position: relative; }
        .form-card { background: var(--glass-bg); border: var(--glass-border); border-top: 4px solid var(--primary); border-radius: var(--radius); padding: 40px; box-shadow: var(--shadow-lg); max-width: 700px; margin: 0 auto; position: relative; z-index: 10; }
        .form-group { position: relative; margin-bottom: 25px; }
        .form-input { width: 100%; padding: 15px 0; font-size: 1rem; color: var(--text-dark); background: transparent; border: none; border-bottom: 2px solid #d1d5db; outline: none; transition: border-color 0.3s; font-family: inherit; }
        .form-input:focus { border-bottom-color: var(--primary); }
        .form-label { position: absolute; top: 15px; left: 0; font-size: 1rem; color: #9ca3af; pointer-events: none; transition: 0.3s ease all; }
        .form-input:focus ~ .form-label, .form-input:not(:placeholder-shown) ~ .form-label, select:focus ~ .form-label, select:valid ~ .form-label { top: -10px; font-size: 0.85rem; color: var(--primary); }
        select.form-input { cursor: pointer; }
        .select-arrow { position: absolute; right: 0; top: 15px; pointer-events: none; color: #9ca3af; }
        .input-error { border-bottom-color: var(--danger) !important; }
        .error-msg { display: none; color: var(--danger); font-size: 0.75rem; margin-top: 5px; }
        .input-error ~ .error-msg { display: block; }
        
        .btn-submit { width: 100%; padding: 16px; background: var(--secondary); color: white; border: none; border-radius: 12px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 10px; }
        .btn-submit:hover { background: var(--primary); box-shadow: 0 5px 15px rgba(79, 70, 229, 0.4); transform: translateY(-2px); }

        .pricing-box { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 15px; font-size: 0.85rem; color: var(--text-dark); margin-bottom: 20px; }
        .price-row { display: flex; justify-content: space-between; margin-top: 5px; }
        .text-green { color: #16a34a; font-weight: 700; }
        .text-orange { color: #ea580c; font-weight: 700; }

        .success-box { text-align: center; padding: 40px 20px; }
        .success-icon { width: 80px; height: 80px; background: #dcfce7; color: #10b981; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; margin: 0 auto 20px; }

        /* Footer */
        footer { background: #0f172a; color: #cbd5e1; padding: 60px 0 20px; border-top: 1px solid #1e293b; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-bottom: 40px; }
        .footer h3 { color: white; margin-bottom: 15px; display: flex; align-items: center; gap: 8px; }
        .footer-list li { margin-bottom: 10px; display: flex; align-items: center; gap: 10px; font-size: 0.9rem; }
        .disclaimer-box { background: rgba(127, 29, 29, 0.1); border: 1px solid rgba(127, 29, 29, 0.3); padding: 20px; border-radius: 12px; }
        .disclaimer-title { color: #f87171; font-weight: 700; margin-bottom: 8px; display: flex; gap: 8px; }
        .disclaimer-text { font-size: 0.8rem; line-height: 1.5; color: #9ca3af; }
        .copyright { text-align: center; border-top: 1px solid #1e293b; padding-top: 20px; font-size: 0.8rem; color: #64748b; }

        /* FAB */
        .fab { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 100; border: 2px solid white; animation: bounce 3s infinite; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }

        @media (max-width: 768px) {
            .navbar { height: 60px; }
            .nav-links { display: none; } 
            .mobile-toggle { display: block; }
            .hero h1 { font-size: 2.2rem; }
            .form-card { padding: 25px; }
            .fab { display: flex; }
        }
        @media (min-width: 769px) { .fab { display: none; } }
    </style>
</head>
<body>

    <a href="#order-section" class="fab"><i class="fas fa-edit"></i></a>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="container nav-content">
            <a href="#" class="logo">
                <div class="logo-icon"><i class="fas fa-shield-alt"></i></div>
                <span>Campus<span style="color:var(--primary)">Run</span></span>
            </a>
            <div class="nav-links">
                <a href="#home" class="nav-link">Home</a>
                <a href="#services" class="nav-link">Services</a>
                <a href="#how-it-works" class="nav-link">How it Works</a>
                <a href="#order-section" class="btn-nav">Order Now</a>
            </div>
            <button class="mobile-toggle" id="mobileMenuBtn"><i class="fas fa-bars"></i></button>
        </div>
    </nav>

    <div class="mobile-menu" id="mobileMenu">
        <a href="#home">Home</a>
        <a href="#services">Services</a>
        <a href="#order-section" style="color:var(--primary); font-weight:700;">Order Now</a>
    </div>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="container animate-fade-in">
            <div class="badge">
                <i class="fas fa-university"></i> Delivery Only Within GTEC College
            </div>

            <h1>
                Order Anything<br>
                <span class="gradient-text">Pre-paid Delivery Service.</span>
            </h1>
            
            <p>
                A GTEC student initiative. Secure your items by ordering online.
                <strong>All orders must be pre-paid</strong> (Cost + Fee) via UPI or Cash before delivery to ensure safety.
            </p>

            <div>
                <a href="#order-section" class="btn-submit" style="display:inline-flex; width:auto; padding: 15px 30px; margin-bottom: 15px;">
                    <i class="fas fa-pen-fancy"></i> Place Order Now
                </a>
            </div>

            <div class="price-pill">
                <i class="fas fa-wallet" style="color:#eab308"></i> Pre-paid Only: <strong>Fees Start @ ₹4</strong>
            </div>
            
            <div style="font-size: 0.8rem; color: #ef4444; background: #fef2f2; display: inline-block; padding: 5px 15px; border-radius: 5px; border: 1px solid #fee2e2;">
                <i class="fas fa-user-friends"></i> Student Initiative. Not affiliated with GTEC College.
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section id="how-it-works" class="container" style="padding-bottom: 40px;">
        <h2 class="section-title">How It Works</h2>
        <div class="steps-grid">
            <div class="step-card">
                <div class="step-num">1</div>
                <h3>Request Item</h3>
                <p style="font-size:0.9rem; color:#6b7280; margin-top:5px;">Fill the form below with item details and link.</p>
            </div>
            <div class="step-card">
                <div class="step-num">2</div>
                <h3>Confirm & Pay</h3>
                <p style="font-size:0.9rem; color:#6b7280; margin-top:5px;">Admin confirms price. You pay via UPI or Cash <strong>before</strong> we buy.</p>
            </div>
            <div class="step-card">
                <div class="step-num">3</div>
                <h3>We Deliver</h3>
                <p style="font-size:0.9rem; color:#6b7280; margin-top:5px;">Once paid, we buy/print the item and deliver to your block.</p>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="container">
        <h2 class="section-title">Select a Service</h2>
        <div class="services-grid">
            
            <div class="service-card">
                <div class="service-badge badge-green">Fee: ₹4</div>
                <div class="service-icon"><i class="fas fa-pen-ruler"></i></div>
                <h3 class="service-title">Stationery</h3>
                <p class="service-desc">Pens, notebooks, files, charts.</p>
                <button class="btn-outline" onclick="prefillForm('Stationery / Item')">Order (Pre-paid)</button>
            </div>

            <div class="service-card">
                <div class="service-badge badge-green">Fee: ₹4</div>
                <div class="service-icon"><i class="fas fa-print"></i></div>
                <h3 class="service-title">Xerox / Print</h3>
                <p class="service-desc">Send PDF. Pay online. We print.</p>
                <button class="btn-outline" onclick="prefillForm('Xerox / Printout')">Order (Pre-paid)</button>
            </div>

            <div class="service-card">
                <div class="service-badge badge-orange">Fee: ₹30</div>
                <div class="service-icon"><i class="fas fa-box"></i></div>
                <h3 class="service-title">Amazon/Flipkart</h3>
                <p class="service-desc">We order for you. Payment required upfront.</p>
                <button class="btn-outline" onclick="prefillForm('Online Order (Amazon/Flipkart)')">Order (Pre-paid)</button>
            </div>

            <div class="service-card">
                <div class="service-badge badge-blue">Custom</div>
                <div class="service-icon"><i class="fas fa-gift"></i></div>
                <h3 class="service-title">Gift Wrapping</h3>
                <p class="service-desc">Wrapping paper & ribbon.</p>
                <button class="btn-outline" onclick="prefillForm('Stationery / Item')">Order (Pre-paid)</button>
            </div>

        </div>
    </section>

    <!-- Form Section -->
    <section id="order-section" class="form-section">
        <div class="container">
            <div class="form-card animate-fade-in">
                <h2 class="section-title" style="margin-bottom: 10px; font-size: 1.5rem;">Fill Order Details</h2>
                <p class="text-center" style="margin-bottom: 30px; color:#6b7280; font-size: 0.9rem;">
                    <i class="fas fa-lock" style="color:var(--primary)"></i> Pre-paid order required for safety.
                </p>

                <form id="deliveryForm" novalidate>
                    
                    <div class="form-group">
                        <input type="text" id="studentName" class="form-input" placeholder=" " required>
                        <label for="studentName" class="form-label"><i class="fas fa-user"></i> Student Name</label>
                        <div class="error-msg">Name cannot be empty.</div>
                    </div>

                    <div class="form-group">
                        <input type="email" id="studentEmail" class="form-input" placeholder=" " required>
                        <label for="studentEmail" class="form-label"><i class="fas fa-envelope"></i> Student Email</label>
                        <div class="error-msg">Valid email required.</div>
                    </div>

                    <div class="form-group">
                        <input type="tel" id="phoneNumber" class="form-input" placeholder=" " required pattern="[0-9]{10}">
                        <label for="phoneNumber" class="form-label"><i class="fas fa-phone"></i> Phone Number</label>
                        <div class="error-msg">Enter 10-digit number.</div>
                    </div>

                    <div class="form-group">
                        <select id="deliveryLocation" class="form-input" required>
                            <option value="" disabled selected></option>
                            <option value="Admin Block">Admin Block</option>
                            <option value="PG Block">PG Block</option>
                            <option value="Canteen">Canteen</option>
                            <option value="Gate">Gate</option>
                        </select>
                        <div class="select-arrow"><i class="fas fa-chevron-down"></i></div>
                        <label for="deliveryLocation" class="form-label"><i class="fas fa-map-marker-alt"></i> Delivery Location</label>
                        <div class="error-msg">Select a location.</div>
                    </div>

                    <div class="form-group">
                        <select id="requestType" class="form-input" required>
                            <option value="" disabled selected></option>
                            <option value="Stationery / Item">Stationery / Physical Item</option>
                            <option value="Xerox / Printout">Xerox / Printout</option>
                            <option value="Online Order (Amazon/Flipkart)">Online Order (Amazon/Flipkart)</option>
                        </select>
                        <div class="select-arrow"><i class="fas fa-chevron-down"></i></div>
                        <label for="requestType" class="form-label"><i class="fas fa-list"></i> What do you need?</label>
                        <div class="error-msg">Select request type.</div>
                    </div>

                    <div id="linkFieldContainer" class="form-group hidden">
                        <input type="url" id="productLink" class="form-input" placeholder=" ">
                        <label for="productLink" class="form-label"><i class="fas fa-link"></i> Product Link (Compulsory)</label>
                        <div class="error-msg">Link is required for online orders.</div>
                    </div>

                    <div class="form-group">
                        <textarea id="productDetails" class="form-input" rows="3" placeholder=" " required style="resize:none"></textarea>
                        <label for="productDetails" class="form-label"><i class="fas fa-pen"></i> Item Details / Print Instructions</label>
                        <div class="error-msg">Please provide details.</div>
                    </div>

                    <div class="form-group">
                        <input type="number" id="productCost" class="form-input" placeholder=" " required min="1">
                        <label for="productCost" class="form-label"><i class="fas fa-tag"></i> Approx Cost (₹)</label>
                        <div class="error-msg">Cost is required.</div>
                    </div>

                    <div class="form-group">
                        <textarea id="additionalNotes" class="form-input" rows="2" placeholder=" " style="resize:none"></textarea>
                        <label for="additionalNotes" class="form-label"><i class="fas fa-sticky-note"></i> Notes (Optional)</label>
                    </div>

                    <div class="pricing-box">
                        <div style="font-weight:700; margin-bottom:5px;">Total Estimated Cost (Pre-paid):</div>
                        <div class="price-row">
                            <span>Stationery / Xerox:</span>
                            <span class="text-green">Item Cost + ₹4</span>
                        </div>
                        <div class="price-row">
                            <span>Amazon / Flipkart:</span>
                            <span class="text-orange">Item Cost + ₹30</span>
                        </div>
                        <div style="font-size:0.75rem; color:#6b7280; margin-top:8px; border-top:1px solid #e2e8f0; padding-top:5px;">
                            <i class="fas fa-info-circle"></i> Admin will contact you for payment via UPI/QR Code.
                        </div>
                    </div>

                    <button type="submit" id="submitBtn" class="btn-submit">
                        Submit Request <i class="fas fa-paper-plane"></i>
                    </button>

                </form>

                <div id="successMessage" class="hidden success-box animate-fade-in">
                    <div class="success-icon"><i class="fas fa-check"></i></div>
                    <h3>Request Sent!</h3>
                    <p style="color:#6b7280; margin: 10px 0 20px;">We will check the item availability and contact you for <strong>Payment</strong> shortly.</p>
                    <button class="btn-outline" onclick="resetForm()">Place Another Order</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3><i class="fas fa-info-circle" style="color:var(--primary)"></i> Contact</h3>
                    <ul class="footer-list">
                         <li><i class="fas fa-envelope" style="color:var(--primary)"></i> magicalarts18@gmail.com</li>
                         <li><i class="fas fa-info" style="color:var(--primary)"></i> Independent Service</li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>Service Rules</h3>
                    <ul class="footer-list">
                        <li><i class="fas fa-wallet" style="color:var(--primary)"></i> <strong>Pre-paid / UPI Only</strong></li>
                        <li><i class="fas fa-map-marker-alt" style="color:var(--primary)"></i> Delivery in GTEC Campus</li>
                        <li><i class="fas fa-clock" style="color:var(--primary)"></i> Order 24 hours prior</li>
                    </ul>
                </div>

                <div class="footer-col">
                    <div class="disclaimer-box">
                        <div class="disclaimer-title"><i class="fas fa-exclamation-triangle"></i> Disclaimer</div>
                        <div class="disclaimer-text">
                            This is a <strong>Student Initiative</strong> and is <strong>NOT affiliated</strong>, endorsed, or managed by GTEC College administration. We act independently to help fellow students.
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright">
                &copy; 2023 CampusRun Student Initiative. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        const EMAILJS_CONFIG = {
            PUBLIC_KEY: "", 
            SERVICE_ID: "", 
            TEMPLATE_ID: "" 
        };

        (function() {
            if(EMAILJS_CONFIG.PUBLIC_KEY) {
                emailjs.init(EMAILJS_CONFIG.PUBLIC_KEY);
            } else {
                console.warn("EmailJS Public Key not set.");
            }
        })();

        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        mobileMenuBtn.addEventListener('click', () => {
            const isVisible = mobileMenu.style.display === 'block';
            mobileMenu.style.display = isVisible ? 'none' : 'block';
        });

        const requestTypeSelect = document.getElementById('requestType');
        const linkFieldContainer = document.getElementById('linkFieldContainer');
        const productLinkInput = document.getElementById('productLink');

        function toggleLinkField() {
            const selected = requestTypeSelect.value;
            if (selected === "Online Order (Amazon/Flipkart)") {
                linkFieldContainer.classList.remove('hidden');
                productLinkInput.setAttribute('required', 'required');
            } else {
                linkFieldContainer.classList.add('hidden');
                productLinkInput.removeAttribute('required');
                productLinkInput.classList.remove('input-error'); 
            }
        }
        requestTypeSelect.addEventListener('change', toggleLinkField);

        function prefillForm(serviceType) {
            document.getElementById('order-section').scrollIntoView({ behavior: 'smooth' });
            requestTypeSelect.value = serviceType;
            toggleLinkField();
            document.getElementById('productDetails').focus();
        }

        const form = document.getElementById('deliveryForm');
        const submitBtn = document.getElementById('submitBtn');
        const successMessage = document.getElementById('successMessage');

        function validateInput(input) {
            if (input.offsetParent === null) return true;
            let isValid = true;
            input.classList.remove('input-error');
            
            if (input.hasAttribute('required') && !input.value.trim()) isValid = false;
            else if (input.id === 'phoneNumber') {
                const phoneRegex = /^[0-9]{10,15}$/;
                if (!phoneRegex.test(input.value.replace(/[^0-9]/g, ''))) isValid = false;
            } 
            else if (input.id === 'studentEmail') {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(input.value)) isValid = false;
            } 
            else if (input.id === 'productCost') {
                if (parseFloat(input.value) <= 0) isValid = false;
            }

            if (!isValid) {
                input.classList.add('input-error');
                input.parentElement.classList.add('animate-shake');
                setTimeout(() => input.parentElement.classList.remove('animate-shake'), 500);
            }
            return isValid;
        }

        const inputs = form.querySelectorAll('input, textarea, select');
        inputs.forEach(input => {
            input.addEventListener('blur', () => { if(input.value) validateInput(input); });
            input.addEventListener('input', () => input.classList.remove('input-error'));
            if(input.tagName === 'SELECT') {
                input.addEventListener('change', () => validateInput(input));
            }
        });

        form.addEventListener('submit', function(event) {
            event.preventDefault();
            let isFormValid = true;
            inputs.forEach(input => { if (!validateInput(input)) isFormValid = false; });

            if (!isFormValid) {
                submitBtn.classList.add('animate-shake');
                setTimeout(() => submitBtn.classList.remove('animate-shake'), 500);
                return;
            }

            const templateParams = {
                student_name: document.getElementById('studentName').value,
                student_email: document.getElementById('studentEmail').value,
                phone_number: document.getElementById('phoneNumber').value,
                delivery_location: document.getElementById('deliveryLocation').value,
                request_type: document.getElementById('requestType').value,
                product_link: document.getElementById('productLink').value || "N/A",
                product_details: document.getElementById('productDetails').value,
                product_cost: document.getElementById('productCost').value,
                message: document.getElementById('additionalNotes').value
            };

            const originalBtnText = submitBtn.innerHTML;
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';

            const sendPromise = (EMAILJS_CONFIG.PUBLIC_KEY && EMAILJS_CONFIG.SERVICE_ID) 
                ? emailjs.send(EMAILJS_CONFIG.SERVICE_ID, EMAILJS_CONFIG.TEMPLATE_ID, templateParams)
                : new Promise(resolve => setTimeout(resolve, 1500)); 

            sendPromise.then(function() {
                form.style.display = 'none';
                successMessage.classList.remove('hidden');
                submitBtn.innerHTML = originalBtnText;
                submitBtn.disabled = false;
                successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, function(error) {
                console.error('FAILED...', error);
                alert("Failed to send request. Check connection.");
                submitBtn.innerHTML = originalBtnText;
                submitBtn.disabled = false;
            });
        });

        function resetForm() {
            form.reset();
            form.style.display = 'block';
            successMessage.classList.add('hidden');
            linkFieldContainer.classList.add('hidden');
            inputs.forEach(input => input.classList.remove('input-error'));
        }
    </script>
</body>
</html>

